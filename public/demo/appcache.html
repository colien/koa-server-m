<!doctype html>
<html lang="en" manifest="demo.appcache">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <link rel="stylesheet" href="./style.css"/>
  <script src="./index.js"></script>
 </head>
 <body>
  <div class="demo">
  </div>
 </body>
 <script>
	window.addEventListener('load', function(){
        // window.applicationCache.update(); // 手动更新缓存 或者 监听到加载缓存完成事件后 刷新页面
	　　/*window.applicationCache.addEventListener("updateready", function(e){
	　　		console.log(window.applicationCache.status);
	　　		setTimeout(function(){
	　　　　		window.location.reload();
	　　		}, 3000);
	　　});
	    */
	});
	window.addEventListener('load', function(e) {
	  window.applicationCache.addEventListener('updateready', function(e) {
		if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
		  // Browser downloaded a new app cache.
		  // Swap it in and reload the page to get the new hotness.
		  window.applicationCache.swapCache();//手动更新缓存。
		  if (confirm('本地缓存已更新，需要刷新画面来获取应用程序最新版本，是否刷新?')) {
			window.location.reload(); //手动刷新页面
		  }
		} else {
		  // Manifest didn't changed. Nothing new to server.
		}
	  }, false);
	 
	}, false);
 </script>
</html>
